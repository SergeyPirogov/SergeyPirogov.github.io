<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="verify-admitad" content="b4f109c5f4" />

    <title>Блеск и нищета Report Portal</title>
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Блеск и нищета Report Portal">
    <meta property="og:image" content="http://automation-remarks.com/images/blog-logo.png"/>

        	<meta property="og:description" content="Об опенсорс проекте Report Portal"/>
	
	<link rel="stylesheet" href="../../css/blueimp-gallery.min.css">	
    <link rel="stylesheet" type="text/css" href="../../css/dependencies.min.css"/>
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/style.min.css" />
    <link rel="stylesheet" type="text/css" href="../../css/blog.css" />

    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-57010828-1', 'auto');
       ga('send', 'pageview');

    </script>
</head>

<body>
    <section id="wrapper">
        <div id="ajax-container">
	<script>var disqus="httpspirogovgithubio";</script>

<nav id="nav" class="nav">
        <div class="nav-panel">
          <a class="main_link" href="/">
            <span class="name">Главная</span>
          </a>
          <a class="video_link" href="/podcast" style="
              width: 5em;
          ">
                      <span class="name">Подкаст</span>
                    </a>
          <a class="author_link" href="/archive.html" style="
              width: 5em;
          ">
                      <span class="name">Архив</span>
                    </a>
          <a class="author_link" href="/author/">
            <span class="name">Об Авторе</span>
          </a>
          <a class="course_link" href="https://spirogov.github.io" style="
              width: 7em;
          ">
                      <span class="name">Обучение</span>
          </a>
        </div>

        <div class="nav-menu">
          <a class="rss" href="https://www.facebook.com/automationremarks"><i class="fa fa-facebook"></i></a>
          <a class="rss" href="https://vk.com/qaremarks"><i class="fa fa-vk"></i></a>
          <a class="rss" href="https://twitter.com/s_pirogov"><i class="fa fa-twitter"></i></a>
          <a class="rss" href="https://qaguild-slack.herokuapp.com/"><i class="fa fa-slack"></i></a>
        </div>
</nav>
	
	<main class="content" role="main">
		<article class="post">
			<div class="inner inner-post">
				<div id="push">
                    <header class="post-header">
                        <span class="post-meta">
                            <span class="post-author">
                                <a href="/author/index.html">Сергей Пирогов</a>
                            </span> |
                            <span class="post-date">
                                01/05/2017
                            </span>
                        </span>
                        <div class="clear"></div>
                        <h1 class="post-title">Блеск и нищета Report Portal</h1>
                    </header>

                    <section class="post-content">
                        <div class="paragraph">
<p>В этой заметке я опишу свои впечатления от использования <a href="https://rp.epam.com/ui/">Report Portal</a> - опенсорс проекта, который призван облегчить жизнь автоматизаторов.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://dev.by/ckeditor_assets/pictures/22979/content_rp_plate.png" alt="content rp plate">
</div>
</div>
<div class="paragraph">
<p>Что такое репорт портал?</p>
</div>
<div class="paragraph">
<p>Смотрим, что говорят разработчики в <a href="http://reportportal.io/#documentation">документации</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>Report Portal is a service, it provides great capabilities for speeding up results
analysis and reporting by means of built-in analytical features.
Report Portal is the great addition to the
Continuous Integration and Continuous Testing process.
It seamlessly integrates with mainstream platforms such as Jenkins, Jira,
BDD process, majority of Functional and Unit testing frameworks.
Real-time integration allows to manage and track execution status directly from Report Portal.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сервис, который ускоряет анализ результатов прогона автоматических тестов и предоставляет возможность репортинга. Звучит достаточно полезно.
Может интегрироваться со всеми мейнстримными тулами и xUnit фреймворками - тоже многообещающе.</p>
</div>
<div class="paragraph">
<p>Зачем я вообще на него смотрел?</p>
</div>
<div class="paragraph">
<p>О репорт портале я слышал еще до того, как это стало мейнстримом. В сентябре 2016 года я пробовал запустить одну из первых версий, вышедных в open-source.
Тогда мне не понравилось то, что портал потребляет очень много ресурсов (&gt;8GB RAM), да и интеграция с TestNG и Junit не выглядела так легко. Тогда я потратил примерно час,
чтобы все поднять.</p>
</div>
<div class="paragraph">
<p>Прошло уже прилично времени, вышла версия 3.0.0 и я, как технический лидер проекта, хотел выяснить, чем конкретно Report Portal может помочь нам, насколько сложно его поставить
и сколько времени нужно потратить на интеграцию.</p>
</div>
<div class="paragraph">
<p>Что из этого получилось? Давайте смотреть.</p>
</div>
<div class="paragraph">
<p><em>Установка:</em></p>
</div>
<div class="paragraph">
<p>Здесь все достаточно неплохо.</p>
</div>
<div class="paragraph">
<p>Берем докер, делаем <code>docker-compose up</code>, ждем пару минут и сервис благополучно поднимается. Это, конечно, большой плюс. По этому пункту замечаний нет.</p>
</div>
<div class="paragraph">
<p><em>Интеграция с xUnit фреймворками:</em></p>
</div>
<div class="paragraph">
<p>Сначала я решил подключить портал к одному из проектов, написанных на Python + Pytest. В официальном репозитории есть соответсутвующий
<a href="https://github.com/reportportal/agent-python-pytest">агент</a>, в котором сказано сделать следующее:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>pip install pytest-reportportal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Не взлетело - завел <a href="https://github.com/reportportal/agent-python-pytest/issues/3">баг</a>. Такое поведение сразу отталкивает, но так как желание попробовать было выше обычного,
я поставил его через Github:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>pip install git+https://github.com/reportportal/agent-python-pytest.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Дальше нужно создать <code>pytest.ini</code> файл:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[pytest]
mandatory fields
rp_uuid = uid reportportal
rp_endpoint = http://ip:port
rp_project = Project of ReportPortal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот тут у меня есть замечание: в документации "очень мелким шрифтом" прописано, куда нужно пойти и взять эти вот значения.
Это указано в документации к модулю для TestNG. Такой вот момент.</p>
</div>
<div class="paragraph">
<p>Ну да ладно, давайте попробуем запустить тесты:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>py.test ./tests --rp-launch selene_blog_test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Все классно: тесты пробегают, в портале создаются соответствующие записи.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/pytest_rp.png" alt="pytest rp">
</div>
</div>
<div class="paragraph">
<p>Однако, есть досадные минусы, которые пока что делают интеграцию портала с pytest практически бессмысленным занятием. Для упавших тестов нету ни стектрейса, ни причины падения.
И это расходится со словами "provides great capabilities for speeding up results analysis".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/pytest_rp_no_trace.png" alt="pytest rp no trace">
</div>
</div>
<div class="paragraph">
<p>Я честно пытался понять, как их туда запихнуть. Про логи есть, а вот про такую стандартную вещь, как стектрейс, нету. Я уже не говорю о скриншотах.
<strong>Allure умеет собирать такую информацию без лишних приседаний.</strong></p>
</div>
<div class="paragraph">
<p><strong>Мой вывод:</strong> пока что Report Portal для пайтон проектов бесполезен по причинам, указанным выше.
Имея <strong>Jenkins</strong> и <strong>Allure</strong>, мы получаем всю нужную информацию без каких-либо накладных расходов.</p>
</div>
<div class="paragraph">
<p>Затем я решил настроить Report Portal + TestNG.</p>
</div>
<div class="paragraph">
<p>Весь процесс занял у меня 30 минут. В документации нету примера интеграции для проектов на <strong>Gradle</strong>. Из-за этого мне пришлось потратить определенное время на то, чтобы разобраться.</p>
</div>
<div class="paragraph">
<p>Ниже описание <code>build.gradle</code> файла с настройками:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>apply plugin: 'java'

repositories {
    jcenter()
    maven {
        url  "http://dl.bintray.com/epam/reportportal"
    }
}

dependencies {
    compile 'com.epam.reportportal:agent-java-testng:3.0.0'
    compile 'com.epam.reportportal:logger-java-logback:2.6.0'
    compile 'com.epam.reportportal:logger-java-log4j:2.6.1'
    compile group: 'org.testng', name: 'testng', version: '6.11'
}

test {
    useTestNG()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В целом с TestNG все обстоит в разы лучше. Здесь и логи собираются, и стектрейсы. Однако, в документации не хватает явного примера крепления скриншотов для упавших тестов.
За Java часть можно поставить зачет.</p>
</div>
<div class="paragraph">
<p><em>Из хорошего:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Портал работает достаточно шустро;</p>
</li>
<li>
<p>Красивый интерфейс;</p>
</li>
<li>
<p>Есть возможность настроить информативные графики и фильтры.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Что имеем в итоге:</em></p>
</div>
<div class="paragraph">
<p>Шероховатости заметны. Да, это опенсорс, но все же хотелось бы иметь plug&amp;play. Когда смотришь на презентации и скринкасты, все
выглядит, как новый майбах&#8230;&#8203; но салон местами как у новой девятки =) На данный момент более предпочтительной я считаю связку <code>Jenkins + Allure</code>. Степень красивости,
возможно, ниже, но информативность и легковесность выше.</p>
</div>
<div class="paragraph">
<p>Киллер-фичей Report Portal является алгоритм, который умеет автоматически анализировать результаты фейлов
и маркать их как баг/ не баг. Секунду! Allure умеет это делать еще с первых дней. Более того, для правильно построенной системы автоматизации время на разбор занимает пару минут, так
как на своих проектах я предпочитаю принцип <code>Zero failed tests</code>. У нас не очень большой проект: суммарный объем тестов, которые пишут автоматизаторы, до 200. Мы стараемся всегда держать тесты зелеными и любой фейл становится причиной разбирательств.
Именно поэтому такая штука, как репорт портал, нам не нужна.</p>
</div>
<div class="paragraph">
<p><em>Кому может пригодиться Report Portal?</em></p>
</div>
<div class="paragraph">
<p>Я думаю, что такую штуку нужно внедрять на проектах с оооочень большим объемом тестов и огромными командами,
которые ковыряются в упавших тестах и тратят много времени на стабилизацию.</p>
</div>
<div class="paragraph">
<p>Вот такие впечатления от Report Portal. Если вы уже успели его попробовать или успешно внедрили, пишите в комментариях - будем обсуждать и давать фидбек разработчикам. Ведь
опенсорс успешным делает только комьюнити.
В следующий раз в вам расскажу об инструменте <strong>Selenoid</strong>, но это уже будет совсем другая история. Па-па =)</p>
</div>
                    </section>

                    <footer class="post-footer">
                            <div class="post-tags">
                                    <a style="background: cornflowerblue;"
                                       href="/tags/Java.html">Java</a>
                            </div>
                    </footer>

                    <div class="row">
                        <h2 style="margin-top: 20px;">Слушайте QAGuild подкаст</h2>
                        <iframe width="100%" height="450" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/422684588&color=%238c8c64&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true" style="margin-bottom: unset;"></iframe>
                    </div>

                    <div class="row">
                          <div class="col-md-6">
                                <div class='related-posts-holder'>
                                     <h2>Похожие заметки:</h2>
                                     <ul class="related-posts">
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-18/index.html">Эпизод-18: Размышления на тему роста и развития QA специалистов</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep17/index.html">Эпизод-17: Александр Венгер о том, как стать самым крутым и другие инсайды с тестатонов</a></li>
                                                <li><a class='js-ajax-link' href="/2018/java-training/index.html">Тренинг Automation in Action Java</a></li>
                                                <li><a class='js-ajax-link' href="/2018/telegram/index.html">Telegram канал - automation-remarks.com</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep15/index.html">QA Guild Podcast #15: Про тестатоны</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep14/index.html">QA Guild Podcast: О том, через какие курсы лучше "Войти в АйТи" (18+)</a></li>
                                                <li><a class='js-ajax-link' href="/2018/consulting/index.html">Консультации для автоматизаторов</a></li>
                                     </ul>
                                 </div>
                          </div>
                          <div class="col-md-6">

                          </div>
                    </div>
				</div>

				 <!-- Begin MailChimp Signup Form -->
                                   <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
                                   <style type="text/css">
                                   	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
                                   	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                                   	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
                                   </style>
                                   <div id="mc_embed_signup">
                                   <form action="//automation-remarks.us10.list-manage.com/subscribe/post?u=d24f95005c1b66c13389aceb9&amp;id=ce47ec0c3f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                                       <div id="mc_embed_signup_scroll">
                                   	<label for="mce-EMAIL">Подписывайтесь на email рассылку</label>
                                   	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
                                       <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                       <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d24f95005c1b66c13389aceb9_ce47ec0c3f" tabindex="-1" value=""></div>
                                       <div class="clear"><input type="submit" value="Подписаться" name="subscribe" id="mc-embedded-subscribe" class="button" style="background: black;"></div>
                                       </div>
                                   </form>
                                   </div>

                                   <!--End mc_embed_signup-->

				<aside class="post-comments">
                    <div id="disqus_thread">
                        <script async="async">(function(d, s, id) {
                                  var js, fjs = d.getElementsByTagName(s)[0];
                                  if (d.getElementById(id)) return;
                                  js = d.createElement(s); js.id = id;
                                  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=344312565764603";
                                  fjs.parentNode.insertBefore(js, fjs);
                                }(document, 'script', 'facebook-jssdk'));
                        </script>
                    </div>
                </aside>
			</div>
		</article>
	</main>

            <footer id="footer">
              <section class="credits">
                <span class="credits-software">Published with <a href="http://jbake.org/">JBake</a></span>
              </section>
            </footer>
         </div>
    </section>

    <script type="text/javascript" src="../../js/dependencies.min.js"></script>
    <script type="text/javascript" src="../../js/script.js" async="async"></script>
    <script src="//my.hellobar.com/b89babe68c85bfcf7416926983e86b31a9467186.js" type="text/javascript" charset="utf-8" async="async"></script>
</body>
</html>