<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="verify-admitad" content="b4f109c5f4" />

    <title>Lombok как способ трансформировать test automation project</title>
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Lombok как способ трансформировать test automation project">
    <meta property="og:image" content="http://automation-remarks.com/images/blog-logo.png"/>

        	<meta property="og:description" content="Рассказ о библиотеке Lombok"/>
	
	<link rel="stylesheet" href="../../css/blueimp-gallery.min.css">	
    <link rel="stylesheet" type="text/css" href="../../css/dependencies.min.css"/>
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/style.min.css" />
    <link rel="stylesheet" type="text/css" href="../../css/blog.css" />

    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-57010828-1', 'auto');
       ga('send', 'pageview');

    </script>
</head>

<body>
    <section id="wrapper">
        <div id="ajax-container">
	<script>var disqus="httpspirogovgithubio";</script>

<nav id="nav" class="nav">
        <div class="nav-panel">
          <a class="main_link" href="/">
            <span class="name">Главная</span>
          </a>
          <a class="video_link" href="/podcast" style="
              width: 5em;
          ">
                      <span class="name">Подкаст</span>
                    </a>
          <a class="author_link" href="/archive.html" style="
              width: 5em;
          ">
                      <span class="name">Архив</span>
                    </a>
          <a class="author_link" href="/author/">
            <span class="name">Об Авторе</span>
          </a>
          <a class="course_link" href="https://spirogov.github.io" style="
              width: 7em;
          ">
                      <span class="name">Обучение</span>
          </a>
        </div>

        <div class="nav-menu">
          <a class="rss" href="https://www.facebook.com/automationremarks"><i class="fa fa-facebook"></i></a>
          <a class="rss" href="https://vk.com/qaremarks"><i class="fa fa-vk"></i></a>
          <a class="rss" href="https://twitter.com/s_pirogov"><i class="fa fa-twitter"></i></a>
          <a class="rss" href="https://qaguild-slack.herokuapp.com/"><i class="fa fa-slack"></i></a>
        </div>
</nav>
	
	<main class="content" role="main">
		<article class="post">
			<div class="inner inner-post">
				<div id="push">
                    <header class="post-header">
                        <span class="post-meta">
                            <span class="post-author">
                                <a href="/author/index.html">Сергей Пирогов</a>
                            </span> |
                            <span class="post-date">
                                16/02/2017
                            </span>
                        </span>
                        <div class="clear"></div>
                        <h1 class="post-title">Lombok как способ трансформировать test automation project</h1>
                    </header>

                    <section class="post-content">
                        <div class="paragraph">
<p>Решил написать заметку о применении <strong>Lombok</strong> для построения автоматизации тестирования.</p>
</div>
<div class="paragraph">
<p><a href="https://projectlombok.org/">Lombok</a> - это библиотека, с помощью которой вы можете сократить количество шаблонного
кода, который нужно писать на Java.</p>
</div>
<div class="paragraph">
<p>Чем Lombok может помочь автоматизатору?</p>
</div>
<div class="paragraph">
<p>Применить ломбок можно разными способами - от уменьшения кода для простых Pojo, до использования Extension Methods.</p>
</div>
<div class="paragraph">
<p>Каноническая Java не поддерживает extension methods, хотя в языках <strong>Groovy</strong>, <strong>Kotlin</strong> и <strong>C#</strong> они есть.
Можно долго дискутировать на предмет того, нужны они или нет, но после того, как я попробовал их применять в Groovy, в Джаве мне
их не хватало.</p>
</div>
<div class="paragraph">
<p>Что такое extension method?</p>
</div>
<div class="paragraph">
<p>Это возможность добавлять методы в уже существующие классы.</p>
</div>
<div class="paragraph">
<p>Скажем, у нас есть  класс WebElement, у которого есть свой API. Вот там нету метода</p>
</div>
<div class="paragraph">
<p><code>shouldHave(String text)</code>, а нам бы очень хотелось иметь такую штуку.</p>
</div>
<div class="paragraph">
<p>С помощью Lombok мы можем такой метод легко добавить:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>public class WebElementExt{

    public static void shouldHave(WebElement el, String text){
          assertEquals(el.getText(),text)
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затем используем в наших тестах:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>@ExtensionMethod(WebElementExt.class)
class Test{

   @Test
   void testWithExt(){
        Webdriver driver = new ChromeDriver();
        driver.findElement(By.css(".header")).shouldHave("MainPage")
   }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Легко и просто. Это лучше, чем писать декоратор, который будет отличаться по типу класса.</p>
</div>
<div class="paragraph">
<p>Если брать более сложный пример, то мы можем написать экстеншн и для самого драйвера:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>public class DriverExtension {

     public static void goTo(WebDriver driver, String url) {
       driver.get(url);
     }

     public static &lt;T extends BasePage&gt; T open(WebDriver driver, Class&lt;? extends BasePage&gt; tClass) {
       try {
         BasePage page = tClass.getDeclaredConstructor(WebDriver.class).newInstance(driver);
         driver.get(page.getUrl());
         return (T) page;
       } catch (InstantiationException e) {
         e.printStackTrace();
       } catch (IllegalAccessException e) {
         e.printStackTrace();
       } catch (NoSuchMethodException e) {
         e.printStackTrace();
       } catch (InvocationTargetException e) {
         e.printStackTrace();
       }
       return null;
     }

     public static UIElement $(WebDriver driver, String locator) {
       return new UIElement(new Locator(By.cssSelector(locator), driver));
     }

     public static UIElement $(WebDriver driver, By locator) {
       return new UIElement(new Locator(locator, driver));
     }
   }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Класс PageObject:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>abstract class BasePage{

  protected WebDriver browser;

  public BasePage(WebDriver driver){
    this.browser = driver;
  }

  public abstract String getUrl();
}

@ExtensionMethod(DriverExtension.class)
public class MainPage extends BasePage{

  @Getter
  private String url = "http://automation-remarks.com/workshop";

  @Getter
  private UIElement mainLink;

  public MainPage(WebDriver driver) {
    super(driver);
    this.mainLink = driver.$("#nav &gt; div.nav-panel &gt; a.main_link &gt; span");
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Класс UIElement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>public class UIElement {

  private Locator locator;

  public UIElement(Locator locator) {
    this.locator = locator;
  }

  public WebElement element() {
    return locator.find();
  }

  public void should(String text) {
    boolean res = element().getText().equals(text);
    assert res;
  }

  public void click() {
    element().click();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>И наконец мы можем использовать все это в наших тестах:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>class Advanced{

  @Test
  void test(){
       val browser = Browser.chrome();
       MainPage mp = browser.open(MainPage.class);
       mp.getMainLink().click();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вы можете применять такой подход в своем существующем фреймворке практически безболезненно.
Правда, есть одно НО - Lombok содержит определенный уровень магии, которую вы не будете понимать. Да и
плагин для Intelij IDEA пока что не полностью поддерживает все фишки Lombok. Но, несмотря на это, я
рекомендую обратить внимание на эту библиотеку и попробовать применить ее у себя на проекте.</p>
</div>
                    </section>

                    <footer class="post-footer">
                            <div class="post-tags">
                                    <a style="background: cornflowerblue;"
                                       href="/tags/Java.html">Java</a>
                                    <a style="background: cornflowerblue;"
                                       href="/tags/Тестовый-фреймворк.html">Тестовый фреймворк</a>
                            </div>
                    </footer>

                    <div class="row">
                        <h2 style="margin-top: 20px;">Слушайте QAGuild подкаст</h2>
                        <iframe width="100%" height="450" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/422684588&color=%238c8c64&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true" style="margin-bottom: unset;"></iframe>
                    </div>

                    <div class="row">
                          <div class="col-md-6">
                                <div class='related-posts-holder'>
                                     <h2>Похожие заметки:</h2>
                                     <ul class="related-posts">
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-18/index.html">Эпизод-18: Размышления на тему роста и развития QA специалистов</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep17/index.html">Эпизод-17: Александр Венгер о том, как стать самым крутым и другие инсайды с тестатонов</a></li>
                                                <li><a class='js-ajax-link' href="/2018/java-training/index.html">Тренинг Automation in Action Java</a></li>
                                                <li><a class='js-ajax-link' href="/2018/telegram/index.html">Telegram канал - automation-remarks.com</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep15/index.html">QA Guild Podcast #15: Про тестатоны</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep14/index.html">QA Guild Podcast: О том, через какие курсы лучше "Войти в АйТи" (18+)</a></li>
                                                <li><a class='js-ajax-link' href="/2018/consulting/index.html">Консультации для автоматизаторов</a></li>
                                     </ul>
                                 </div>
                          </div>
                          <div class="col-md-6">

                          </div>
                    </div>
				</div>

				 <!-- Begin MailChimp Signup Form -->
                                   <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
                                   <style type="text/css">
                                   	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
                                   	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                                   	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
                                   </style>
                                   <div id="mc_embed_signup">
                                   <form action="//automation-remarks.us10.list-manage.com/subscribe/post?u=d24f95005c1b66c13389aceb9&amp;id=ce47ec0c3f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                                       <div id="mc_embed_signup_scroll">
                                   	<label for="mce-EMAIL">Подписывайтесь на email рассылку</label>
                                   	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
                                       <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                       <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d24f95005c1b66c13389aceb9_ce47ec0c3f" tabindex="-1" value=""></div>
                                       <div class="clear"><input type="submit" value="Подписаться" name="subscribe" id="mc-embedded-subscribe" class="button" style="background: black;"></div>
                                       </div>
                                   </form>
                                   </div>

                                   <!--End mc_embed_signup-->

				<aside class="post-comments">
                    <div id="disqus_thread">
                        <script async="async">(function(d, s, id) {
                                  var js, fjs = d.getElementsByTagName(s)[0];
                                  if (d.getElementById(id)) return;
                                  js = d.createElement(s); js.id = id;
                                  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=344312565764603";
                                  fjs.parentNode.insertBefore(js, fjs);
                                }(document, 'script', 'facebook-jssdk'));
                        </script>
                    </div>
                </aside>
			</div>
		</article>
	</main>

            <footer id="footer">
              <section class="credits">
                <span class="credits-software">Published with <a href="http://jbake.org/">JBake</a></span>
              </section>
            </footer>
         </div>
    </section>

    <script type="text/javascript" src="../../js/dependencies.min.js"></script>
    <script type="text/javascript" src="../../js/script.js" async="async"></script>
    <script src="//my.hellobar.com/b89babe68c85bfcf7416926983e86b31a9467186.js" type="text/javascript" charset="utf-8" async="async"></script>
</body>
</html>