<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="verify-admitad" content="b4f109c5f4" />

    <title>Мой взгляд на &quot;хорошие&quot; локаторы в Selenium</title>
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Мой взгляд на &quot;хорошие&quot; локаторы в Selenium">
    <meta property="og:image" content="http://automation-remarks.com/images/blog-logo.png"/>

        	<meta property="og:description" content="Почему я не сильно много времени трачу на написание локаторов"/>
	
	<link rel="stylesheet" href="../../css/blueimp-gallery.min.css">	
    <link rel="stylesheet" type="text/css" href="../../css/dependencies.min.css"/>
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/style.min.css" />
    <link rel="stylesheet" type="text/css" href="../../css/blog.css" />

    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-57010828-1', 'auto');
       ga('send', 'pageview');

    </script>
</head>

<body>
    <section id="wrapper">
        <div id="ajax-container">
	<script>var disqus="httpspirogovgithubio";</script>

<nav id="nav" class="nav">
        <div class="nav-panel">
          <a class="main_link" href="/">
            <span class="name">Главная</span>
          </a>
          <a class="video_link" href="/podcast" style="
              width: 5em;
          ">
                      <span class="name">Подкаст</span>
                    </a>
          <a class="author_link" href="/archive.html" style="
              width: 5em;
          ">
                      <span class="name">Архив</span>
                    </a>
          <a class="author_link" href="/author/">
            <span class="name">Об Авторе</span>
          </a>
          <a class="course_link" href="https://spirogov.github.io" style="
              width: 7em;
          ">
                      <span class="name">Обучение</span>
          </a>
        </div>

        <div class="nav-menu">
          <a class="rss" href="https://www.facebook.com/automationremarks"><i class="fa fa-facebook"></i></a>
          <a class="rss" href="https://vk.com/qaremarks"><i class="fa fa-vk"></i></a>
          <a class="rss" href="https://twitter.com/s_pirogov"><i class="fa fa-twitter"></i></a>
          <a class="rss" href="https://qaguild-slack.herokuapp.com/"><i class="fa fa-slack"></i></a>
        </div>
</nav>
	
	<main class="content" role="main">
		<article class="post">
			<div class="inner inner-post">
				<div id="push">
                    <header class="post-header">
                        <span class="post-meta">
                            <span class="post-author">
                                <a href="/author/index.html">Сергей Пирогов</a>
                            </span> |
                            <span class="post-date">
                                04/03/2017
                            </span>
                        </span>
                        <div class="clear"></div>
                        <h1 class="post-title">Мой взгляд на &quot;хорошие&quot; локаторы в Selenium</h1>
                    </header>

                    <section class="post-content">
                        <div class="paragraph">
<p>Пост о том, как я пересмотрел свое отношение к локаторам и при этом никто не пострадал.
Всем начинающим автоматизаторам советуют изучать css и xpath локаторы. Без знания локаторов
сложно писать UI автотесты. Большинство курсов, книг и статей глаголят, что вот, мол, нужно
уметь писать "хорошие" локаторы. При этом понятие "хороший локатор" не имеет четкого опеределения.</p>
</div>
<div class="paragraph">
<p>Давайте посморим, например, какой из этих локаторов "хорош"?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>1) #push &gt; article:nth-child(1) &gt; div
2) //*[@id="push"]/article[1]/div</code></pre>
</div>
</div>
<div class="paragraph">
<p>Считаю, что вариант #1 лучше, так как он более лаконичный, да и вообще я
предпочитаю использовать css локаторы вместо xpath. Почему?</p>
</div>
<div class="paragraph">
<p>Еще пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>1) article.post
2) //article[@class='post ']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Здесь четко видно, что css более читабельный и писать его проще. Вывод: css локаторы более предпочтительны
для использования в наших Selenium тестах.
Казалось бы, вопрос можно закрывать и расходиться делать проекты, но мы же так и не определили
понятие "хороший локатор". Приведенные выше локаторы хороши, но достаточно ли, чтобы
претендовать на звание "лучший локатор"?</p>
</div>
<div class="paragraph">
<p>Когда я только начинал заниматься автоматизацией, следуя всем наставлениям своих менторов,
старался учить и писать максимально хорошие локаторы. Радовало, что в то время в файрфоксе
еще работали Firebug и FirePath. Но проект мой открывался только в IE8 и мне такие блага были недоступны.
Поэтому я работал в убогом <code>Internet Explorer Dev Tools</code> и тогда еще парился по
поводу "хороших" локаторов.
После у меня был проект, на котором UI рендерился с помощью фреймворка <code>Vaadin</code>. Тогда я
не стеснялся просто скопировать локатор, который мне предлагал FirePath и без оглядки его использовать.
Но вопрос "хороших локаторов" по-прежнему не давал покоя.</p>
</div>
<div class="paragraph">
<p>Локатор получался местами длинным:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>.v-verticallayout.v-verticallayout-invoice-detail-view-main.invoice-detail-view-main

или

//*[@id='ordermgmtui-1932176413']//table/tbody/tr[2]/td[@class='v-formlayout-contentcell']/input</code></pre>
</div>
</div>
<div class="paragraph">
<p>Но эти локаторы были хороши, потому что работали стабильно. Почему я не сильно старался
сделать их лучше или переписать? А зачем? Они дались мне практически даром: два клика в браузере
и все. Важно понимать, что локаторы - это не нечто архиавжное. Иногда говорят: "Мы так пишем
локаторы, чтобы тесты были стабильнее, вдруг завтра верстка поменяется&#8230;&#8203;"
Если верстка поменяется, вы сделаете два клика и поменяете локатор.
Нет смысла сейчас тратить 5-10 минут на то, что может никогда и не случиться.</p>
</div>
<div class="paragraph">
<p>Именно поэтому я перестал обращать внимание на возгласы по поводу правильных и красивых
локаторов. Правый клик мышкой на элементе &#8594; Copy selector и поехали.</p>
</div>
<div class="paragraph">
<p>Пример c <a href="http://inbox.google.com" class="bare">http://inbox.google.com</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>def setup_module(m):
    (LoginPage()
        .open()
        .login_as(email,password))

def test_can_add_reminder():
    (MainPage()
     .add_new_reminder("call Mama")
     .reminder.should(have.text("Call Mama")))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вполне читабельные тесты.</p>
</div>
<div class="paragraph">
<p>Реализации PageObject:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>from selene.api import *

class LoginPage(object):
    def __init__(self):
        self.email = s("#Email")
        self.next_btn = s("#next")
        self.password = s("#Passwd")
        self.sign_in_btn = s("#signIn")
        self.city_input = s("#answer")
        self.ready_btn = s("#submit")


    def open(self):
        browser.visit("https://inbox.google.com/")
        return self

    def login_as(self, email, password):
        self.email.send_keys(email)
        self.next_btn.click()
        self.password.send_keys(password)
        self.sign_in_btn.click()

class MainPage(object):

    def __init__(self):
        self.plus_btn =  s("#aVMuZe &gt; div.nPQzwd.iP &gt; div.jB &gt; button")
        self.create_new_reminder_btn = s("#aVMuZe &gt; div.nPQzwd.iP &gt; div.jp &gt; div.S &gt; button")
        self.reminder_input = s("body &gt; div.eG.f &gt; div &gt; div.nY.na &gt; div.od &gt; div.k0 &gt; div")
        self.reminder_save_btn = s("body &gt; div.eG.f &gt; div &gt; div.nY.na &gt; div.od &gt; div.ft &gt; div.dy.qj.ev")
        self.reminder = s("#Nr &gt; div &gt; div &gt; div.No &gt; div.bg.summTaskTitle &gt; span")


    def add_new_reminder(self, text):
        self.plus_btn.hover()
        self.create_new_reminder_btn.click()
        self.reminder_input.send_keys(text)
        self.reminder_save_btn.click()
        return self</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да, некоторые локаторы длинные и нечитабельные, но они "хорошие", потому что они работают стабильно и дались мне практически даром.</p>
</div>
<div class="paragraph">
<p><strong>Вывод:</strong> Для меня "лучший локатор" - тот, который работает стабильно и на создание
которого я потратил максимум 10 секунд. Из личных наблюдений: <strong>Chrome Dev Tools</strong>
позволяет в <strong>80%</strong> случаев получать именно такие локаторы.
Поэтому я не стесняюсь просто брать и копировать локатор прямо оттуда.
Мой опыт показывает, что гораздо важнее уметь быстро создавать тесты, чем изначально
тратить кучу времени на локаторы, которые вы все равно рано или поздно будете менять.
И все же обязательно нужно думать головой и принимать только взвешенные решения.</p>
</div>
                    </section>

                    <footer class="post-footer">
                            <div class="post-tags">
                                    <a style="background: cornflowerblue;"
                                       href="/tags/Java.html">Java</a>
                            </div>
                    </footer>

                    <div class="row">
                        <h2 style="margin-top: 20px;">Слушайте QAGuild подкаст</h2>
                        <iframe width="100%" height="450" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/422684588&color=%238c8c64&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true" style="margin-bottom: unset;"></iframe>
                    </div>

                    <div class="row">
                          <div class="col-md-6">
                                <div class='related-posts-holder'>
                                     <h2>Похожие заметки:</h2>
                                     <ul class="related-posts">
                                                <li><a class='js-ajax-link' href="/2019/java-jun/index.html">Тренинг Automation in Action Java for Juniors</a></li>
                                                <li><a class='js-ajax-link' href="/2019/qaguild-s2e2/index.html">s2e2: Производительность, нагрузка и вот это вот все</a></li>
                                                <li><a class='js-ajax-link' href="/2019/qa-guild-s2e1/index.html">QAGuild s2e1: Долгая работа в одной компании</a></li>
                                                <li><a class='js-ajax-link' href="/2019/qa-guild-ep27/index.html">Эпизод-27: Юбилейный выпуск, завершение первого сезона</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep26/index.html">Эпизод-26: Новости осени и тренды на 2019 год</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep25/index.html">Эпизод-25: Про сертификации и ISTQB</a></li>
                                                <li><a class='js-ajax-link' href="/2018/qa-guild-ep24/index.html">QAGuild Эпизод-24: Марина Хомич о том, как нанимают людей и что важно при составлении резюме</a></li>
                                     </ul>
                                 </div>
                          </div>
                          <div class="col-md-6">

                          </div>
                    </div>
				</div>

				 <!-- Begin MailChimp Signup Form -->
                                   <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
                                   <style type="text/css">
                                   	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
                                   	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                                   	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
                                   </style>
                                   <div id="mc_embed_signup">
                                   <form action="//automation-remarks.us10.list-manage.com/subscribe/post?u=d24f95005c1b66c13389aceb9&amp;id=ce47ec0c3f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                                       <div id="mc_embed_signup_scroll">
                                   	<label for="mce-EMAIL">Подписывайтесь на email рассылку</label>
                                   	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
                                       <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                       <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d24f95005c1b66c13389aceb9_ce47ec0c3f" tabindex="-1" value=""></div>
                                       <div class="clear"><input type="submit" value="Подписаться" name="subscribe" id="mc-embedded-subscribe" class="button" style="background: black;"></div>
                                       </div>
                                   </form>
                                   </div>

                                   <!--End mc_embed_signup-->

				<aside class="post-comments">
                    <div id="disqus_thread">
                        <script async="async">(function(d, s, id) {
                                  var js, fjs = d.getElementsByTagName(s)[0];
                                  if (d.getElementById(id)) return;
                                  js = d.createElement(s); js.id = id;
                                  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=344312565764603";
                                  fjs.parentNode.insertBefore(js, fjs);
                                }(document, 'script', 'facebook-jssdk'));
                        </script>
                    </div>
                </aside>
			</div>
		</article>
	</main>

            <footer id="footer">
              <section class="credits">
                <span class="credits-software">Published with <a href="http://jbake.org/">JBake</a></span>
              </section>
            </footer>
         </div>
    </section>

    <script type="text/javascript" src="../../js/dependencies.min.js"></script>
    <script type="text/javascript" src="../../js/script.js" async="async"></script>
    <script src="//my.hellobar.com/b89babe68c85bfcf7416926983e86b31a9467186.js" type="text/javascript" charset="utf-8" async="async"></script>
</body>
</html>