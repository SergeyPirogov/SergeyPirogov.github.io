<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


    <title>Избавьтесь от нестабильных тестов с VideoRecorder</title>
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Избавьтесь от нестабильных тестов с VideoRecorder">
    <meta property="og:image" content="http://automation-remarks.com/images/blog-logo.png"/>

        	<meta property="og:description" content="В этот раз хочу поделиться парой мыслей по поводу нестабильных тестов и способами борьбы с ними."/>
	
	<link rel="stylesheet" href="../css/blueimp-gallery.min.css">	
    <link rel="stylesheet" type="text/css" href="../css/dependencies.min.css"/>
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/blog.min.css" />

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter28753121 = new Ya.Metrika({
                        id:28753121,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript>
    <div><img src="https://mc.yandex.ru/watch/28753121" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>

<body>
    <section id="wrapper">
        <div id="ajax-container">
	<script>var disqus="httpspirogovgithubio";</script>

<nav id="nav" class="nav">
        <div class="nav-panel">
          <a class="main_link" href="/">
            <span class="name">Главная</span>
          </a>
          <a class="video_link" href="/tags/Видео.html">
            <span class="name">Видео</span>
          </a>
          <a class="author_link" href="/archive.html">
            <span class="name">Архив</span>
          </a>
          <a class="author_link" href="/author/">
            <span class="name">Об Авторе</span>
          </a>
        </div>

        <div class="nav-menu">
          <a class="rss" href="https://www.facebook.com/automationremarks"><i class="fa fa-facebook"></i></a>
          <a class="rss" href="https://vk.com/qaremarks"><i class="fa fa-vk"></i></a>
          <a class="rss" href="https://twitter.com/s_pirogov"><i class="fa fa-twitter"></i></a>
          <a class="rss" href="http://feeds.feedburner.com/automation-remarks"><i class="fa fa-rss"></i></a>
        </div>
</nav>	
	<main class="content" role="main">
		<article class="post">
			<div class="inner inner-post">
				<div id="push">
                    <header class="post-header">
                        <span class="post-meta">
                            <span class="post-author">
                                <a href="/author/index.html">Сергей Пирогов</a>
                            </span> |
                            <span class="post-date">
                                19/05/2016
                            </span>
                        </span>
                        <div class="clear"></div>
                        <h1 class="post-title">Избавьтесь от нестабильных тестов с VideoRecorder</h1>
                    </header>

                    <section class="post-content">
                        <div class="paragraph">
<p>Привет, новая заметка немного подзадержалась, так как я готовлюсь к поездке на <a href="http://qaconf.ru/speakers.html">QA Conference</a>.</p>
</div>
<div class="paragraph">
<p>В этот раз хочу поделиться парой мыслей по поводу нестабильных тестов и способами борьбы с ними. Конкретно речь пойдет о UI тестах для WEB и Desktop приложений.</p>
</div>
<div class="paragraph">
<p>Естественно, всем хотелось бы иметь стабильные UI автотесты, которые можно запускать на любом компьютере и, тем самым, проверять работоспособность системы, но, увы, зачастую это не так. На всех конференциях автоматизаторы сходятся во мнениях о том, что нужно соблюдать баланс и сохранять структуру пирамиды автоматизации. Тем не менее, в силу каких-либо обстоятельств на многих проектах до сих пор вместо пирамиды мы можем видеть "мороженко".</p>
</div>
<div class="paragraph">
<p>Мне удается держать свои автотесты стабильными и запускать их практически в любой момент. Как такого можно добиться? Мой секрет заключается в том, что UI тесты - это, по сути, автоматизация E2E сценариев, более того, в тестах мы проверяем функциональность нашего UI. Немаловажным фактором является то, что я мастерски использую Selenide, ну и последнее - автотесты запускаются каждый день! Именно ежедневные запуски, даже на тех же сборках, позволяют мне быть уверенным, что мой тест работает стабильно и все падения вызваны изменениями или ошибками в тестируемом приложении.</p>
</div>
<div class="paragraph">
<p>Но, тем не менее, я знаю проекты или случаи (на моем прошлом проекте так было), когда было достаточно серьезное число нестабильных тестов, ситуация усугублялась еще и тем, что тестирование проводилось только в браузере Internet Explorer 8-10.</p>
</div>
<div class="paragraph">
<p>У всех на проектах есть скриншоты, которые призваны помогать выяснить причины падений тестов, но вот одна проблема - не всегда скриншоты дают ясную картину. Самая досадная вещь - когда у вас есть снимок экрана, но на нем не запечатлена ошибка, так как скриншотер сработал на секунду позже нужного момента. Как быть в этом случае? Можно принудительно делать скриншот и пытаться угадать момент падения, а можно <a href="http://automation-remarks.com/pishiem-vidieo-vo-vriemia-proghona-tiestov/">писать видео</a> нестабильного теста!</p>
</div>
<div class="paragraph">
<p>Наверное вы удивитесь, но да, зачастую это самый верный способ выявить причины нестабильности, более того, теперь писать видео ваших тестов стало очень просто, так как я решил написать библиотеку, которая позволит многим не думать о деталях реализации процесса записи, - <strong>VideoRecorder</strong>.</p>
</div>
<div class="paragraph">
<p>Что полезного даст эта библиотека?</p>
</div>
<div class="paragraph">
<p>Все очень просто - вы сможете легко записывать видео ваших автотестов, просто добавив аннотацию <strong>@Video</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Пример:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Listeners(VideoListener.class)
public class TestNGVideo {

@Test
@Video
public void testName3() throws Exception {
     open("http://ukr.net");
     $(".login &gt; input").val("Hello");
     $(".password &gt; input").val("test");
     $(".submit &gt; bu").click();
}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот так просто! Выполнение данного теста будет записано на видео и сохранено в нужном вам месте. На данный момент я успел реализовать интеграцию с TestNG, но в планах сделать подобное и для работы с JUnit, Spock или же любого другого тест-ранера из мира Java.</p>
</div>
<div class="paragraph">
<p>Из фишек! По умолчанию видеофайл будет иметь имя теста и записи будут сохраняться только для FAILED тестов. Вы можете легко переопределить новое имя для файла, просто указав его в параметрах аннотации:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Test
@Video(name = "second_test")
public void testName2() throws Exception {
    open("http://ukr.net");
    $(".login &gt; input").val("User");
    $(".password &gt; input").val("User");
    $(".submit &gt; button").click();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот такая вот получилась штучка. Вы можете использовать это как для тестов с <strong>Selenide</strong>, так и для тестов с <strong>Winium</strong>.</p>
</div>
<div class="paragraph">
<p>Если вам интересна данная идея, напишите в комментариях свои мысли&#8230;&#8203;</p>
</div>
                    </section>

                    <footer class="post-footer">
                            <div class="post-tags">
                                    <a href="/tags/Тест-фреймворк.html">Тест фреймворк</a>
                                    <a href="/tags/Java.html">Java</a>
                            </div>
                    </footer>

                    <div class="row">
                          <div class="col-md-6">
                                <div class='related-posts-holder'>
                                     <h2>Похожие заметки:</h2>
                                     <ul class="related-posts">
                                                <li><a class='js-ajax-link' href="/2017/sqa-days-20-video/index.html">Видео с SQA days 20</a></li>
                                                <li><a class='js-ajax-link' href="/2016/summary-2016/index.html">Новогодний пост</a></li>
                                                <li><a class='js-ajax-link' href="/2016/python-webdriver-manager/index.html">Python webdriver manager is comming</a></li>
                                                <li><a class='js-ajax-link' href="/2016/selenide-shadow-sides/index.html">Темная сторона Selenide</a></li>
                                                <li><a class='js-ajax-link' href="/2016/qa-fest-video/index.html">Видео с QA Fest 2016</a></li>
                                                <li><a class='js-ajax-link' href="/2016/sqa-days-20-feedback/index.html">SQA days 20: ретроспектива</a></li>
                                                <li><a class='js-ajax-link' href="/2016/sel-camp-cfp/index.html">Selenium Camp 2017 call for papers</a></li>
                                     </ul>
                                 </div>
                          </div>
                          <div class="col-md-6">

                          </div>
                    </div>
				</div>
				<aside class="post-comments">
                    <div id="disqus_thread">
                        <script async="async">(function(d, s, id) {
                                  var js, fjs = d.getElementsByTagName(s)[0];
                                  if (d.getElementById(id)) return;
                                  js = d.createElement(s); js.id = id;
                                  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=344312565764603";
                                  fjs.parentNode.insertBefore(js, fjs);
                                }(document, 'script', 'facebook-jssdk'));
                        </script>
                    </div>
                </aside>
			</div>
		</article>
	</main>

            <footer id="footer">
              <section class="credits">
                <span class="credits-software">Published with <a href="http://jbake.org/">JBake</a></span>
              </section>
            </footer>
         </div>
    </section>

    <script type="text/javascript" src="../js/dependencies.min.js"></script>
    <script type="text/javascript" src="../js/script.js" async="async"></script>
    <script type="text/javascript" src="../js/index.min.js" async="async"></script>
    <script src="//my.hellobar.com/b89babe68c85bfcf7416926983e86b31a9467186.js" type="text/javascript" charset="utf-8" async="async"></script>
</body>
</html>